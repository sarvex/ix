#!/usr/bin/env python
# -*- coding: utf-8 -*-

import requests
import logging
import datetime
import urllib
import re


class Rarbg(object):

    def __init__(self):
        self.token = None
        self.last_check = None
        self.logger = logging.getLogger('modules.torrentsearch')
        self.session = requests.Session()
        self.tokenExpireDate = None

        self.urls = {'token': 'https://torrentapi.org/pubapi_v2.php?get_token=get_token&format=json&app_id=HTPCMANAGER',
                     'listing': 'https://torrentapi.org/pubapi_v2.php?mode=list&app_id=HTPCMANAGER',
                     'search': 'https://torrentapi.org/pubapi_v2.php?mode=search&app_id=HTPCMANAGER&format=json_extended&search_string=%s',
                     'api_spec': 'https://rarbg.com/pubapi/apidocs.txt',
                     }

    def search(self, q, cat=None):
        l = []
        self.logger.info('Rarbg searching for %s' % q)
        if (self.token is None or datetime.datetime.now() > self.token_expire):
            self.__gettoken()

        r = self.__fetch(self.urls['search'] % urllib.quote_plus(q))
        if 'torrent_results' in r:
            if r['torrent_results']:
                for torrent in r['torrent_results']:
                    d = {
                        'Provider': 'rarbg',
                        'BrowseURL': torrent['info_page'],
                        'DownloadURL': torrent['download'],
                        'ReleaseName': torrent['title'],
                        'Seeders': torrent['seeders'],
                        'Leechers': torrent['leechers'],
                        'Size': int(torrent['size']),
                        'Container': 'N/A',
                        'Snatched': 'N/A',
                    }

                    l.append(d)

                self.logger.debug('Found %s torrents' % len(l))
                return l
        if r['error']:
            self.logger.error('%s errorcode %s' % (r['error'], r['error_code']))
            return l
        else:
            return l

    def __gettoken(self):
        r = self.__fetch(self.urls['token'])
        self.logger.debug('Fetching token')
        try:
            if r['token']:
                self.last_check = None
                self.token_expire = datetime.datetime.now() + datetime.timedelta(minutes=14)
                self.token = r['token']
                self.logger.debug('Found token %s' % self.token)
        except Exception as e:
            self.logger.error('No token %s' % e)

    def __fetch(self, url, data=None, json=None):
        url += '&token=%s&ranked=0&sort=seeders&json_extended=1&limit=100' % self.token
        try:
            if json:
                json = json.dumps(json)

            self.logger.debug(url)
            r = self.session.get(url, data=data, json=json, timeout=10)
            if r:
                return r.json()
        except Exception as e:
            self.logger.error('Failed to fetch %s %s' % (url, e))
            return []

    def mock(self):
        # sr for "game"
        x = '{"torrent_results":[{"title":"Game of Thrones S05E07 HDTV x264-ASAP[ettv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:e4f0b6a3723e58eaa45ab92aae5d38072a5f8cde&dn=Game+of+Thrones+S05E07+HDTV+x264-ASAP%5Bettv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":15607,"leechers":806,"size":367651846,"pubdate":"2015-05-25 01:58:18 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-24","epnum":"07","seasonnum":"5","title":"The Gift"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_5_7_8_6_5__e4f0b6a372"},{"title":"Game.of.Thrones.S05E10.720p.HDTV.x264-IMMERSE[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:5bbaa839ddb42bb1af627760a53e3628bb513290&dn=Game.of.Thrones.S05E10.720p.HDTV.x264-IMMERSE%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":13875,"leechers":1009,"size":1166857236,"pubdate":"2015-06-15 01:58:47 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-14","epnum":"10","seasonnum":"5","title":"Mother\u2019s Mercy"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_9_6_5_1__5bbaa839dd"},{"title":"Game.of.Thrones.S05E09.720p.HDTV.x264-0SEC[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:3aa7e09a3a8a214b1f5a43b38a6936954afedc7d&dn=Game.of.Thrones.S05E09.720p.HDTV.x264-0SEC%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":11177,"leechers":660,"size":1541501297,"pubdate":"2015-06-08 01:51:50 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-07","epnum":"09","seasonnum":"5","title":"The Dance of Dragons"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_5_6_3_9__3aa7e09a3a"},{"title":"Game of Thrones S05E10 HDTV x264-KILLERS[ettv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:9609f0336566953f3bf342241b25e2437f65b2c8&dn=Game+of+Thrones+S05E10+HDTV+x264-KILLERS%5Bettv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":8384,"leechers":740,"size":439848614,"pubdate":"2015-06-15 02:02:38 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-14","epnum":"10","seasonnum":"5","title":"Mother\u2019s Mercy"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_9_6_5_4__9609f03365"},{"title":"Game of Thrones S05E02 HDTV x264-Xclusive [oldeztv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:9fb267cff5ae5603f07a347676ec3bf3e35f75e1&dn=Game+of+Thrones+S05E02+HDTV+x264-Xclusive+%5Boldeztv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":6131,"leechers":208,"size":388899911,"pubdate":"2015-04-12 03:36:23 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-04-19","epnum":"02","seasonnum":"5","title":"The House of Black and White"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_3_1_4_8_6__9fb267cff5"},{"title":"Game.of.Thrones.S05E08.720p.HDTV.x264-0SEC[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:a01287a1724d98763bea5501f657bde60a867be0&dn=Game.of.Thrones.S05E08.720p.HDTV.x264-0SEC%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":5733,"leechers":531,"size":1605558027,"pubdate":"2015-06-01 01:58:16 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-31","epnum":"08","seasonnum":"5","title":"Hardhome"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_1_9_6_3__a01287a172"},{"title":"Game of Thrones S05E09 PROPER HDTV x264-KILLERS[ettv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:f49f64db758a7e854c57dc60d7cc43061a2a02da&dn=Game+of+Thrones+S05E09+PROPER+HDTV+x264-KILLERS%5Bettv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":5255,"leechers":343,"size":494417552,"pubdate":"2015-06-08 03:32:07 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-07","epnum":"09","seasonnum":"5","title":"The Dance of Dragons"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_5_6_8_7__f49f64db75"},{"title":"Game.of.Thrones.S05E10.1080p.HDTV.x264-BATV[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:a68aca4924784c40ae25751b98d0949f9fecf14b&dn=Game.of.Thrones.S05E10.1080p.HDTV.x264-BATV%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":4395,"leechers":856,"size":6395895362,"pubdate":"2015-06-15 07:29:59 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-14","epnum":"10","seasonnum":"5","title":"Mother\u2019s Mercy"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_9_8_3_0__a68aca4924"},{"title":"Game of Thrones S05E05 HDTV x264-ASAP[ettv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:9800748ddda1891def1d01c04f8cc0bccae1a192&dn=Game+of+Thrones+S05E05+HDTV+x264-ASAP%5Bettv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":4232,"leechers":177,"size":313862729,"pubdate":"2015-05-11 01:58:11 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-10","epnum":"05","seasonnum":"5","title":"Kill the Boy"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_4_9_8_2_6__9800748ddd"},{"title":"Game.Of.Thrones.S05E05.720p.HDTV.x264-0SEC[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:5f9a5961ea1d1aa8d7c94108f6f40c5f27e95256&dn=Game.Of.Thrones.S05E05.720p.HDTV.x264-0SEC%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":4135,"leechers":713,"size":1230164741,"pubdate":"2015-05-11 01:58:15 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-10","epnum":"05","seasonnum":"5","title":"Kill the Boy"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_4_9_8_2_7__5f9a5961ea"},{"title":"Game of Thrones S05E07 720p HDTV x264-0SEC","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:aa4d48e3285a8ffcf1c8e1c7074bd12186766287&dn=Game+of+Thrones+S05E07+720p+HDTV+x264-0SEC&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":3495,"leechers":239,"size":1410375184,"pubdate":"2015-05-25 02:27:19 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-24","epnum":"07","seasonnum":"5","title":"The Gift"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_5_7_8_7_8__aa4d48e328"},{"title":"Game.of.Thrones.S05E10.720p.HDTV.x264-0SEC[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:85e257ba1ac02cfae513bc8324b96d332b469e91&dn=Game.of.Thrones.S05E10.720p.HDTV.x264-0SEC%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":3083,"leechers":204,"size":1453978936,"pubdate":"2015-06-15 02:00:07 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-14","epnum":"10","seasonnum":"5","title":"Mother\u2019s Mercy"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_9_6_5_2__85e257ba1a"},{"title":"Game of Thrones S05E06 720p HDTV x264-IMMERSE","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:3acf09e55973d1ee6f2dbf3fd1dce7bb610de361&dn=Game+of+Thrones+S05E06+720p+HDTV+x264-IMMERSE&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":2721,"leechers":793,"size":1139987774,"pubdate":"2015-05-18 02:18:14 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-17","epnum":"06","seasonnum":"5","title":"Unbowed, Unbent, Unbroken"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_5_4_1_4_2__3acf09e559"},{"title":"Game of Thrones S05E08 HDTV x264-KILLERS[ettv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:2c7fac7a8b18716e7209fc4ad769642deab43ae1&dn=Game+of+Thrones+S05E08+HDTV+x264-KILLERS%5Bettv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":2576,"leechers":216,"size":470173385,"pubdate":"2015-06-01 02:11:53 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-31","epnum":"08","seasonnum":"5","title":"Hardhome"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_1_9_6_7__2c7fac7a8b"},{"title":"Game.of.Thrones.S05E09.1080p.HDTV.x264-BATV[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:a12cdf5008a7384061ee8fb9339acab5164a2e28&dn=Game.of.Thrones.S05E09.1080p.HDTV.x264-BATV%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":2523,"leechers":344,"size":4819437068,"pubdate":"2015-06-08 05:02:34 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-07","epnum":"09","seasonnum":"5","title":"The Dance of Dragons"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_5_7_7_0__a12cdf5008"},{"title":"Game.of.Thrones.S05E10.HDTV.x264-KILLERS[rartv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:2d87e48cde1ce5253b8ebaca692d174f63f6daf4&dn=Game.of.Thrones.S05E10.HDTV.x264-KILLERS%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":2383,"leechers":252,"size":439848476,"pubdate":"2015-06-15 02:00:41 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-14","epnum":"10","seasonnum":"5","title":"Mother\u2019s Mercy"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_9_6_5_3__2d87e48cde"},{"title":"Game.of.Thrones.S05E08.HDTV.x264-KILLERS[rartv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:3f755aed361ffc38ab6dc9f8f8b0f3e21593902a&dn=Game.of.Thrones.S05E08.HDTV.x264-KILLERS%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":2139,"leechers":83,"size":470173247,"pubdate":"2015-06-01 02:10:53 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-31","epnum":"08","seasonnum":"5","title":"Hardhome"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_1_9_6_6__3f755aed36"},{"title":"Game of Thrones S05E01 WEBRip XviD-FUM[ettv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:008b8e8633010064ddbd78609002e5895a18ca64&dn=Game+of+Thrones+S05E01+WEBRip+XviD-FUM%5Bettv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":2114,"leechers":33,"size":444669506,"pubdate":"2015-04-12 02:54:02 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-04-12","epnum":"01","seasonnum":"5","title":"The Wars to Come"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_3_1_4_7_7__008b8e8633"},{"title":"Game.of.Thrones.S05E01.720p.HDTV.x264-IMMERSE[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:8bdfe94f654501e781a1499c664243611003e1bb&dn=Game.of.Thrones.S05E01.720p.HDTV.x264-IMMERSE%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":1736,"leechers":65,"size":1062726384,"pubdate":"2015-04-13 01:55:53 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-04-12","epnum":"01","seasonnum":"5","title":"The Wars to Come"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_3_2_0_6_0__8bdfe94f65"},{"title":"Game.of.Thrones.S05E06.720p.HDTV.x264-IMMERSE[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:dc4e3139feb4b58c0e7aa13ca7ab5488f513fca1&dn=Game.of.Thrones.S05E06.720p.HDTV.x264-IMMERSE%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":1606,"leechers":65,"size":1128323005,"pubdate":"2015-05-18 01:54:53 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-17","epnum":"06","seasonnum":"5","title":"Unbowed, Unbent, Unbroken"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_5_4_1_3_2__dc4e3139fe"},{"title":"Game.of.Thrones.S05E05.1080p.HDTV.x264-BATV[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:d9e9fcd2068882e0a3e51c9ad86e195f9f0d5b0d&dn=Game.of.Thrones.S05E05.1080p.HDTV.x264-BATV%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":1524,"leechers":517,"size":4717090921,"pubdate":"2015-05-11 04:59:43 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-10","epnum":"05","seasonnum":"5","title":"Kill the Boy"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_4_9_9_8_0__d9e9fcd206"},{"title":"Game of Thrones S05E06 HDTV x264-ASAP[ettv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:dbe720f223aae9b6e5886122fd2eee18b90195c1&dn=Game+of+Thrones+S05E06+HDTV+x264-ASAP%5Bettv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":1390,"leechers":462,"size":354602653,"pubdate":"2015-05-18 01:56:27 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-17","epnum":"06","seasonnum":"5","title":"Unbowed, Unbent, Unbroken"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_5_4_1_3_5__dbe720f223"},{"title":"Game.of.Thrones.S05E06.HDTV.x264-ASAP[rartv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:281076a2451effe6ddd07542cec7fe4782b5bb06&dn=Game.of.Thrones.S05E06.HDTV.x264-ASAP%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":1350,"leechers":67,"size":351176182,"pubdate":"2015-05-18 01:52:14 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-17","epnum":"06","seasonnum":"5","title":"Unbowed, Unbent, Unbroken"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_5_4_1_2_7__281076a245"},{"title":"Game of Thrones S05E10 HDTV XviD-FUM[ettv]","category":"TV Episodes","download":"magnet:?xt=urn:btih:0cecaa044943ef1c75d0841061adaa56b9d9f7d6&dn=Game+of+Thrones+S05E10+HDTV+XviD-FUM%5Bettv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":1234,"leechers":136,"size":538799858,"pubdate":"2015-06-15 05:47:27 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-06-14","epnum":"10","seasonnum":"5","title":"Mother\u2019s Mercy"},"ranked":0,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_9_7_9_0__0cecaa0449"},{"title":"Game.of.Thrones.S05E08.1080p.HDTV.x264-BATV[rartv]","category":"TV HD Episodes","download":"magnet:?xt=urn:btih:c9ba2c8a5251620fe1bd5166237922b7d5599f7a&dn=Game.of.Thrones.S05E08.1080p.HDTV.x264-BATV%5Brartv%5D&tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&tr=udp%3A%2F%2F9.rarbg.me%3A2710&tr=udp%3A%2F%2F9.rarbg.to%3A2710&tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce","seeders":1220,"leechers":146,"size":5332879177,"pubdate":"2015-06-01 07:11:03 +0000","episode_info":{"imdb":"tt0944947","tvrage":"24493","tvdb":"121361","airdate":"2015-05-31","epnum":"08","seasonnum":"5","title":"Hardhome"},"ranked":1,"info_page":"https:\/\/torrentapi.org\/redirect_to_info.php?token=zk80n2gove&p=8_6_2_1_2_1__c9ba2c8a52"}]}'
        return x
